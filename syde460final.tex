% vim: tw=80 et sw=4
\documentclass{sydeStyle}
\usepackage{amsmath}
\usepackage{amssymb}
% \usepackage{graphicx}
\usepackage{longtable}

\coursecode{462}
\prof{Professor Stashuk}
\title{
Design of an Autonomous Hang-Glider Controller - Final Report
}
\date{\today}

\author{Andrew Cameron, 20252410}
\authorthree{Peter Lobsinger, 20195824}

\begin{document}

\maketitle

\tableofcontents

\chapter{Introduction}
% This should introduce the topic in a manner understandable by anyone with a
% reasonable technical background (i.e. any 1st year engineering student should
% be able to understand the problem). Identify the need or problem that you want
% to address and why you want to address it. Indicate why and to whom the
% problem is important.  Background information should motivate the need for the
% design and show the nature, extent or significance of the problem you have
% defined.  This can be done, for example, by identifying inadequacies in
% existing designs, demonstrating an industry need for such an implementation,
% or reviewing existing research on the topic.  These three aspects
% (Introduction, Background and Problem Statement) can be organized in separate
% sections, or all together, etc. in order to suit the readability for your
% particular workshop.

The Waterloo Rocketry Team (WRT) is designing and building a rocket to compete
in the 2011 Intercollegiate Rocket Engineering Competition. One aspect of the
competition is a payload which will be assessed on functionality and
innovation\cite{IREC}. To satisfy this component, the WRT has opted to create a
several alternative payloads one of which is a glider to be deployed at the apex
of the rocket's flight.

The concept for the glider is a spring-loaded Paresev-type craft,
consisting of a control mass suspended bellow a triangular wing composed of
sailcloth or other flexible material, similar to a conventional
hang-glider\cite{wiki:parasev}. The glider must fit within the payload area of
the rocket and will therefore be no longer than 50~cm in length.

The mechanical design of a glider suitable for this task was the subject of a
design project by 4A Mechanical Engineering student, Gandhali Joshi. However,
the control of this craft has not yet been considered.

Control of the craft is imperative as failure to recover any component of
the rocket or payload will result in disqualification from the
competition\cite{IREC}. It is therefore the objective of this design project to
design a control system for this glider to allow for ease of recoverability.

\chapter{Objectives}
% The objectives should not have changed in principle from the Design Plan and
% Interim Report, however, you may want to rework them to ensure that they fit
% in with the rest of the report.  Do not discuss why objectives may have been
% reworked here; this should be saved for the “Description of Time-Line” section
% (described below).

The deployment strategy, managed by the rocketry team, should leave the glider
clear of the rocket and deploying with an attitude suitable to flight. This is
where the task of the controller begins.

\section{Maintain Flight}

When the glider has achieved stable flight, it must remain in stable flight
until it reaches the ground. Meteorological conditions may make this infeasible.
It is therefore necessary to temper this requirement in moderate winds. For the
purposes of this project, moderate wind has been defined as having a ground
speed no greater than 30~km/h, at the upper end of "Moderate Breeze" on the
Beaufort scale\cite{wiki:beaufort}.

\section{Fly to Target}

The main objective of the controller is to seek out and arrive at a
predetermined position on the ground, to allow for the easy recovery of the
craft upon landing. This is only feasible for certain sets of initial conditions
and meteorological conditions.

The rocket provides some guidance as to the initial conditions, while the
meteorological conditions have been limited in the objective above.

Specifically, the bounds on the initial conditions are: an altitude of between
2 and 5~km above ground level, corresponding to a wide range about the maximum
apex of the rocket flight; lateral displacement from target of no more than
1~km, corresponding to the worst case estimate of the rockets trajectory;
between 0 and 9.8~m/s downward velocity, corresponding to up to 1 second of
freefall before deployment; between 0.5 and 3~m/s ground speed, corresponding
to estimates of rocket flight apex velocity; any attitude that will give an
angle of attack of between 0 and 30 degrees, given the initial velocities,
corresponding to the assumption that the deployment procedure will position the
craft in an orientation favourable to flight; and zero spin rates,
corresponding to the assumption that freefall will be dominated by
translational, not rotational, motions.

\section{Land Safely}

The craft is intended to be reused, the craft must not be destroyed
upon landing. Therefor, impact forces, and impact velocities causing these must
be limited. As the craft is unmanned, moderate impact shocks upon landing are
acceptable. Research into acceptable bounds for impact shocks is ongoing.

\chapter{Methodology}
% Criteria (measurable qualities) and constraints (hard decisions) should be
% provided to guide the design process and motivate preferred solutions.  The
% extent of the use of criteria and constraints is project dependent.  The
% design group should provide sufficient information in this section to fully
% justify the methods used.

A model considering the dynamics and aerodynamics of the craft is being
developed based on existing work on hang glider flight \cite{Rogallo1960}
\cite{Layton1963} \cite{spottiswoode}.
Initially, this model is based on the craft investigated in \cite{spottiswoode},
but will be updated as data about the actual craft become available.

Concurrent to this, a controller is being designed based on this model.
A linearization of the system dynamics was obtained in \cite{spottiswoode}
through use of experimental data gathered in a wind tunnel and in free flight,
which is being used to design the controller using state-space methods.  Pole
placement was used for a first iteration of the controller design.  More
sophisticated design techniques will be considered pending results of
simulation analysis.  A likely candidate for control will be Linear Quadratic
Regulation, with Kalman filter state estimation.

To validate the controller, a series of simulations will be run using the
previously developed model to check that the controller meets dynamic
performance specifications and disturbance rejection criteria.  These will be
run at the extreme bounds of valid initial conditions, regularly spaced
intervals in the range of valid initial conditions, as well as a population of
random samples for initial conditions.  A number of wind conditions will be
considered in these simulations based on known existing meteorological
phenomena including zero wind, purely horizontal wind, updraft, downdraft, a
convection cell, and randomly selected linear superpositions and translations
of these.

\section{Modelling of Craft Dynamics}
% Since you model lift and drag forces and so on, it's my understanding that it
% counts as 'dynamics'.  But you're the expert, so if you want to change the
% title, that's your prerogative! =)
We used fluid mechanics and Newtonian/Eulerian mechanics, or something.

\section{Controller Design}
The controller must keep the craft flying stably while simultaneously attempting
to navigate to its destination.  This means it must prevent the craft from
attaining unstable attitudes, including those of pitch, roll, and yaw.  While
maintaining stable flight, the controller must adjust the craft's heading in
order to follow a smooth flightplan towards its objective.  The design of the
controller was separated into inner and outer loops, each operating in a
different reference frame, to simplify the design of each aspect of the control
system.  The ultimate goal of the outer-loop controller is to designate a
flightplan for the inner-loop controller to match; hence, it will be referred to
as the Path Planner.

%TODO: block diagram of control scheme.

The outer-loop block consists of a logical controller, instead of the typical
LTI setup.  The reasoning behind this choice was that, depending on the current
state of the craft, control objectives should be prioritized differently.  The
Path Planner prioritizes stable flight first and foremost; if the craft is in a
configuration outside its normal operational parameters, the control objectives
will be re-prioritized such that stable, forward flight is the only goal acted
upon by the inner loop.  On the other hand, if the craft is operating within its
flight envelope, the Path Planner will designate the desired heading in an
attempt to minimize the difference between the craft's current heading and the
direction of the target.  However, it limits its designation to within a
reasonable range of the craft's current heading, in order to avoid destabilizing
flight.

%TODO: table, ranking objectives and ranges in which they operate.

The inner-loop controller was designed around the linearization of craft
dynamics provided by \cite{spottiswoode}.  For the purposes of the simulation,
all state variables are directly measurable.  A physical implementation would
not share this property, and so an observer would have to be designed to
estimate state.  However, the Separation Principle assures us that the
controller design is independant of the observer design, so the controller
designed here can be augmented with an observer later if the prototype is
actually built.  In the meantime, limiting the design to stabilization and
heading tracking simplifies the design.

\subsection{Performance Requirements}
Several considerations compete when establishing performance requirements for
the control system.  The craft must stay near the linearization point for the
model to remain accurate.  The control signal must remain within regions of
physical operation; since it corresponds to spherical coordinates of the control
mass, the horizontal plane serves as an extreme limit for absolute displacements
(in other words, the angular positions of the control mass are limited to at
most $\pm \pi/2$).  Therefore, the need for responses fast enough to stabilize
the craft compete with the need to keep control signals small.

In order to establish specifications for the controller to meet, the open-loop
system was simulated (i.e., the glider with identically zero control input) and
measurements were made to determine how quickly the system diverged from the
linearization point.  Physical limits of craft behaviour were also specified.
The specifications arrived at are summarized in Table~\ref{tab:specs}.

%TODO: come up with performance requirements.
\begin{table}[b]
    \centering
    \begin{tabular}{|c|}
        hmm
    \end{tabular}
    \caption{Performance specifications}
    \label{tab:specs}
\end{table}

\subsection{Linear Quadratic Regulation}
The control design methodology used was that of linear quadratic regulation.
Linear feedback (see (\ref{eqn:ctrllaw})) is designed to optimize a quadratic
cost function (see (\ref{eqn:cost})).  By augmenting the state with
integrals of the output error (see (\ref{eqn:z})), perfect steady-state tracking
is achieved with zero additional design complexity.  The design parameters $Q$
and $R$ are chosen and iteratively refined in order to meet the performance
requirements.

\begin{equation}
    u
    =
    -
    \begin{pmatrix}
        K_{state} & K_{ref}
    \end{pmatrix}
    \begin{pmatrix}
        x \\ z
    \end{pmatrix}
    \label{eqn:ctrllaw}
\end{equation}

\begin{equation}
    z = \int\limits_0^t r(t) - y(t) \; \textrm{d}t
    \label{eqn:z}
\end{equation}

\begin{equation}
    J(u) = \int\limits_0^\infty x^T(t)Qx(t) + u^T(t)Ru(t) \; \textrm{d}t
    \label{eqn:cost}
\end{equation}

\section{Simulation}
Hooray for ODE solvers!

\chapter{Results and Discussion}
% Final results must be presented based on your design or testing of your
% design.  Results should indicate the efficacy of your design efforts with
% respect to the objectives.

\chapter{Conclusions and Recommendations}
% You must provide a clear, succinct account of your contributions to the design
% and solution of the identified problem.  Shortcomings should be identified
% (nothing is ever perfect!).  Future recommendations must be provided and can
% (if appropriate) be formulated as a basis for a future Systems Design
% workshop.

\chapter{Timeline}
% Provide a copy of your original timeline and a description of how well you met
% the objectives initially projected.  Provide an explanation for situations
% where the timeline requirements were not met.  This information is best placed
% in an Appendix.

\begin{longtable} { c l c c c } 
    \hline
    Month & Task & Status & Andrew & Peter \\
    \hline
    Sep
        & Identify task & Completed & \checkmark & \checkmark \\
        & Identify important unknowns & Completed & \checkmark & \checkmark \\
        & Research wing dynamics & Completed & \checkmark \\
        & Obtain prior art & Completed & \checkmark & \\
    \hline
    Oct
        & Design Plan & Completed & \checkmark \\
        & Glider component breakdown & Completed & \checkmark & \\
        & Glider team PDR & Completed & \checkmark & \checkmark \\
        & Glider stable flight model & Ongoing & & \checkmark \\
        & Actuator and sensor selection & Defered & \checkmark & \\
    \hline
    Nov
        & Actuator and sensor parts acquisition & Defered & \checkmark & \\
        & Glider deployment strategy & Adopted by WRT & & \checkmark \\
        & Actuator and sensor testing & Defered & \checkmark & \\
        & Steady flight controller design & Ongoing & \checkmark & \\
    \hline
    Dec
        & Glider mechanical design & Completed, & & \\
            & completed and presented (external) & Parameters Available & & \\
        & Website Summary & Completed & & \checkmark \\
        & Interim Progress Report & Completed & \checkmark & \\
    \hline
    Jan
        & WRT engine tests (external) & Scheduled & & \\
        & Steady flight controller design (continued) & Ongoing & \checkmark & \\
        & Adjustment/augmentation of & Adopted by WRT & \checkmark & \\
            & controller for deployment task  \\
        & Rocket flight vibration modeling & Abandonned & & \checkmark \\
    \hline
    Feb
        & WRT test flight (external) & Scheduled & & \\
        & Controller parts acquisition & & \checkmark & \\
        & Rocket flight shock/forces modeling & Abandonned & & \checkmark \\
    \hline
    Mar
        & Assembly & & \checkmark & \checkmark \\
        & Glider test flight & & \checkmark & \checkmark \\
        & 2 week buffer & & & \\
    \hline
    Apr
        & Final Report & & & \checkmark \\
        & Conference Summary & & & \checkmark \\
        & Project Video & & \checkmark & \\
        & Symposium Presentation Materials & & \checkmark & \\
        & Symposium & & \checkmark & \checkmark \\
    \hline
    Jun
        & Intercollegiate Rocket \\
            & Engineering Competition & & \checkmark & \checkmark \\
    \hline
\end{longtable}

\bibliography{syde460final}

\end{document}
